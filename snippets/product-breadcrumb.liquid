{% comment %}
  Product Breadcrumb Component
  Displays: < Back | Collection / Product Name
{% endcomment %}

{%- liquid
  assign collection_name = ''
  assign back_url = ''
  assign current_collection = null

  # Check if there's a collection context from the request
  if collection and collection.handle
    assign current_collection = collection
  elsif product.collections.size > 0
    # Use the first collection if no collection context
    assign current_collection = product.collections.first
  endif

  # Set collection name and back URL
  if current_collection
    assign collection_name = current_collection.title
    assign back_url = current_collection.url
  else
    # Fallback to all collections page
    assign back_url = '/collections/all'
  endif
-%}

<div class="product-breadcrumb">
  <div class="product-breadcrumb__wrapper">
    <a href="{{ back_url }}" class="product-breadcrumb__back">
      <svg class="product-breadcrumb__back-icon" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M10 12L6 8L10 4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
      Back
    </a>

    {% if collection_name != blank %}
      <span class="product-breadcrumb__separator">|</span>
      <nav class="product-breadcrumb__nav">
        <a href="{{ back_url }}" class="product-breadcrumb__collection">{{ collection_name }}</a>
        <span class="product-breadcrumb__divider">/</span>
        <span class="product-breadcrumb__product">{{ product.title }}</span>
      </nav>
    {% endif %}
  </div>
</div>

<style>
.product-breadcrumb {
  width: 100%;
  margin-bottom: 33px;
  margin-top: 30px;
}

.product-breadcrumb__wrapper {
  display: flex;
  align-items: center;
  gap: 12px;
  flex-wrap: wrap;
  font-size: 0.875rem;
  line-height: 1.5;
  color: #000000;
  max-width: 100%;
}

.product-breadcrumb__back {
  font-size: 12px;
  font-family: Manrope;
  display: flex;
  align-items: center;
  gap: 6px;
  text-decoration: none;
  color: #000000;
  font-weight: 500;
  transition: opacity 0.2s ease;
  white-space: nowrap;
}

.product-breadcrumb__back:hover {
  opacity: 0.7;
}

.product-breadcrumb__back-icon {
  margin-left: 26px;
  width: 16px;
  height: 16px;
  flex-shrink: 0;
}

.product-breadcrumb__separator {
  color: #979797;
  font-size: 14px;
  display: flex;
  align-items: center;
  flex-shrink: 0;
}

.product-breadcrumb__nav {
  font-size: 12px;
  font-family: Manrope;
  display: flex;
  align-items: center;
  gap: 8px;
  flex-wrap: wrap;
  min-width: 0;
  flex: 1;
}

.product-breadcrumb__collection {
  text-decoration: none;
  color: #000000;
  font-weight: 500;
  transition: opacity 0.2s ease;
  text-transform: capitalize;
  white-space: nowrap;
}

.product-breadcrumb__collection:hover {
  opacity: 0.7;
}

.product-breadcrumb__divider {
  font-size: 16px;
  display: inline-block;
  flex-shrink: 0;
}

.product-breadcrumb__product {
  color: #000000;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  min-width: 0;
}

/* Mobile responsive */
@media (max-width: 749px) {
  .product-breadcrumb {
    margin-bottom: 16px;
    margin-top: 0;
  }

  .product-breadcrumb__wrapper {
    font-size: 0.75rem;
    gap: 8px;
    padding: 0 var(--padding-sm, 16px);
  }

  .product-breadcrumb__back {
    font-size: 11px;
  }

  .product-breadcrumb__back-icon {
    margin-left: 0;
    width: 12px;
    height: 12px;
  }

  .product-breadcrumb__separator {
    font-size: 12px;
  }

  .product-breadcrumb__nav {
    font-size: 11px;
    gap: 6px;
    flex: 1;
    min-width: 0;
  }

  .product-breadcrumb__divider {
    font-size: 14px;
  }

  .product-breadcrumb__product {
    max-width: 100%;
  }
}

/* Tablet */
@media (min-width: 750px) and (max-width: 1199px) {
  .product-breadcrumb {
    margin-bottom: 20px;
    margin-top: 20px;
  }

  .product-breadcrumb__back-icon {
    margin-left: 12px;
  }
}
</style>

